---
import { getLocaleUrlCTM } from "@/lib/utils/i18nUtils";
import { toSentenceCase } from "@/lib/utils/textConverter";

import config from ".astro/config.generated.json" with { type: "json" };

type Props = {
  class?: string;
  logoPath?: string;
  logoWidth?: number;
  logoHeight?: number;
};

let { 
  class: className, 
  logoPath: customLogoPath,
  logoWidth: customLogoWidth,
  logoHeight: customLogoHeight 
}: Props = Astro.props;

let { title } = config.site;

// Default logo dimensions: 3553x1488 (aspect ratio ~2.39:1)
// For footer white logo: 2817x1276 (aspect ratio ~2.21:1)
// Set logo height to fill navigation bar (py-4 = 16px top + 16px bottom = 32px padding)
// Navigation bar total height ~64px, logo should fill the available space (around 60px)
const defaultLogoHeight = 60; // Height in pixels - large enough to fill navigation bar without gaps
const defaultLogoWidth = Math.round((3553 / 1488) * defaultLogoHeight); // Calculate width to maintain aspect ratio (~143px)

// Use custom dimensions if provided, otherwise use defaults
const logoHeight = customLogoHeight || defaultLogoHeight;
const logoWidth = customLogoWidth || (customLogoPath?.includes("MMCWHITE") 
  ? Math.round((2817 / 1276) * logoHeight) 
  : defaultLogoWidth);

// Direct path to SVG logo in public folder for fastest loading
const logoPath = customLogoPath || "/images/MMCLOGO.svg";
---

<a
  href={getLocaleUrlCTM("/", Astro.currentLocale)}
  class:list={["logo-wrapper", className]}
  style="margin: 0; padding: 0;">
  <img
    src={logoPath}
    width={logoWidth}
    height={logoHeight}
    alt={toSentenceCase("Brand logo of " + title)}
    class="logo"
    loading="eager"
    decoding="async"
    style={{
      height: logoHeight + "px",
      width: logoWidth + "px",
      maxHeight: "100%",
      maxWidth: "none",
      objectFit: "contain",
      display: "block",
      margin: "0",
      padding: "0",
    }}
  />
</a>
