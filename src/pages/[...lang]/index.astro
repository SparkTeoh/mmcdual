---
import Base from "@/layouts/Base.astro";
import { getEntryCTM } from "@/lib/contentParser.astro";
import { generatePaths } from "@/lib/utils/i18nUtils.ts";
import AboutUs from "@/components/sections/AboutUs.astro";
import Customers from "@/components/sections/Customers.astro";
import HomeBanner from "@/components/sections/HomeBanner.astro";
import HowItWorks from "@/components/sections/HowItWorks.astro";
import BlogSection from "@/components/sections/BlogSection.astro";
import CallToAction from "@/components/sections/CallToAction.astro";
import Testimonial from "@/components/sections/TestimonialSection.astro";
import ServicesSection from "@/components/sections/ServicesSection.astro";
import PortfolioSection from "@/components/sections/PortfolioSection.astro";

export function getStaticPaths() {
  return generatePaths();
}

const homepage = await getEntryCTM("homepage", "-index", Astro.currentLocale);
---

<Base {...homepage?.data} homepage={true}>
  <!-- Hidden H1 for SEO - not displayed visually but accessible to screen readers and search engines -->
  <h1 class="sr-only">{homepage?.data?.title || (Astro.currentLocale === "zh" ? "值得信赖的马来西亚持牌财务规划公司" : "Trusted Licensed Financial Planning Firm In Malaysia")}</h1>
  <HomeBanner />
  <Customers />
  <AboutUs />
  <ServicesSection content={homepage?.data.servicesSection} />
  <HowItWorks />
  <PortfolioSection />
  <Testimonial />
  <BlogSection />
  <CallToAction content={homepage?.data.callToActionSection} />
</Base>
